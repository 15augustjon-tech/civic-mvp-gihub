'use client';

import { useState, useEffect } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import Link from 'next/link';
import Image from 'next/image';
import { fetchSenators, Senator } from '@/lib/data';
import { cn, getPartyColor } from '@/lib/utils';
import { AlertTriangle } from 'lucide-react';

// Accurate US state SVG paths from standard geographic data
const statePaths: Record<string, { d: string; name: string }> = {
  AL: {
    d: "M631.5,369.4l-1.9,24.7l-1.4,14.4l-1.1,8l2.6,9.5l3.7,8.9l1,5.5l0.2,4.4l-17.7,2.3l-21.2,2.1l0.4,-6.7l0.2,-3.2l4.5,-0.3l1.2,-17.2l2.3,-26.9l3.8,-30.9l22.9,-2.2l3.3,4.5l1.1,3z",
    name: "Alabama",
  },
  AK: {
    d: "M158.1,453.7l-0.2,85.4l2.6,0.5l3.5,-1.8l2.5,1.8l4.5,-0.5l0.5,-4l6,0l0.5,4.5l1.5,0.5l1,-3.5l3.5,0l1.5,3l2.1,0.5l3,-0.5l2.3,-2.4l1.6,0.9l3.5,-1l1,-0.5l4.5,0.5l4,2l8,0l3.5,-3l3,-0.5l1.5,1.6l3,0.5l1,4l6.5,3l3.5,-0.5l4,2l2.6,4.5l5.5,0.5l3,2l2.5,-2.5l-1,-3l-3,-2l1.2,-2.5l5,-5l1,-4.5l5,-3.5l3,-0.5l2.5,1l1.5,-2.5l5,0.5l3,1l2.5,4l2,1.5l4,0.5l2,-3l-1.5,-5l-5,-3l-2.5,-1l1,-2.5l-4.5,-4l-2,-3.5l-1,-2.5l1,-1.5l5,3.5l3,0.5l3,1.5l1.5,3.5l4,1.5l5,-4l-1,-4l-2,-2.5l-3.5,-1l-3,1l-3.5,-2.5l-6,-1l-3.5,-1l-3.5,1l-2,-1.5l2.5,-4l-0.5,-3l-6,-0.5l-3,1.5l-4,1l-3.5,-2l-2,2l-5.5,-2.5l-2.5,2l-3,0.5l-3.5,-2l-3,-0.5l-2.5,-3l0.5,-3.5l-5,-1l-1.5,2l-5,-2l-2,-5l-4,-1l-0.5,4l-4.5,-4l0,-3.5l-1.5,-2.5l-5,1.5l-0.5,4.5l-3.5,1.5l-2.5,-1.5l-5.5,2.5l-1.5,3l-2.5,1l-3.5,-1l-0.5,-4l-1.5,-1l-5,-0.5l-0.5,-4l-2,-2l-3.5,0.5l-0.5,-5l-2.5,-0.5l-3.5,2l-2.5,-1.5l-2.5,3l-2.5,-2l-4,0.5l-4.5,2.5l-3,-0.5l-3,1l-4,-5l-0.5,-4.5l-3,-1.5l-6,-0.5l-5,1.5l-1,4.5z M40,534l3,-2l2,2.5l-1,3l-4.5,0.5l-1,-2zM46,538l2,0.5l0.5,3l-2.5,0l-1,-2.5zM55,537l2.5,0.5l0,2l-2.5,0.5l-1,-2zM69,537.5l1,2l-3,1.5l-0.5,-2zM56.5,534l1.5,3l-2,0.5l-1,-3zM103,505l4,-1l1,-5l3.5,3l-2.5,5l-5.5,1.5l-1,-2z",
    name: "Alaska",
  },
  AZ: {
    d: "M214.9,354.6l-1.8,-15.6l-7.5,-42.8l-13.9,-72.4l19.3,-3.6l38.7,-8l27.2,-5.8l22.5,88.5l9.5,42l3.3,13.1l-30.5,7.5l-11.5,-15.5l-3.5,-0.5l-1.5,1l-0.5,5.5l-7,5.3l-4.5,0l-2.5,1.5l-3.5,9l-4.5,3.5l-3.5,0l-1.5,3.5l-23.3,3z",
    name: "Arizona",
  },
  AR: {
    d: "M554.8,344.4l-6.7,0.4l-2.4,-3.9l0,-4.7l-4,-5.2l-1.7,0l-1.4,2.4l-3.5,-0.1l-5.3,2.9l-4.1,-1l-3.7,3l-41.5,1.6l-0.8,-7.1l2.5,-8.2l-2.6,-4.9l0.9,-10.2l-2.5,-11.6l3.1,-7.6l5.3,-8.2l-0.7,-4.9l3.8,-4.9l-1.5,-3.9l2.1,-0.7l60.6,-1.9l3.6,6l-1.9,8.9l2.4,5.5l0.7,12l1.4,4.9l-4,7.1l2.9,5.9l-1,23.3z",
    name: "Arkansas",
  },
  CA: {
    d: "M122.7,238.6l-26.6,5.9l5.3,-15.6l4.2,-7.2l0.5,-9.5l-3.2,-4.6l-0.8,-4.6l3.9,-6.7l-1.6,-8.9l-5.6,-8.7l-3.9,-3.7l-4,-6.5l2.5,-7.5l0,-7l-3.5,-6.5l4,-1l5.5,2.5l7.5,3.5l1.5,5.5l3,2.5l0.5,3.5l-2,2.5l1.5,4l4,-0.5l2.5,3l1.5,5.5l5.5,6l1.5,4l-0.5,3l2.5,2.5l4,4l2,6.5l4,5l3.5,3l6,2.5l2.5,3.5l0.5,4l2,1.5l4,-4.5l4.5,0l2.5,-2l3,0.5l0.5,3.5l2.5,3.5l4,2l5,5l4.5,1.5l0.5,1.5l2.5,-0.5l2,1.5l2.5,3.5l4.5,1.5l3,2.5l6.5,8.5l28.6,42.9l21.8,30.7l-6.5,9.3l-1.8,15.6l-34.7,7.5l-38,-87.8l-3,-4.5l-1.5,-7.5l-5,-4l-3,-5.5l-8.5,-5l-5,-5.5l-1.5,-5.5l-3.5,-5.5l-5,-4.5l-2.5,-2l-5,0z",
    name: "California",
  },
  CO: {
    d: "M368.4,253.9l-5.5,-83l-67.9,6.2l-45.7,2l6.9,41.7l6.4,40.9l54.4,-4.7l51.4,-3.1z",
    name: "Colorado",
  },
  CT: {
    d: "M852.5,171.5l-3.5,-16.7l-0.7,-4.3l-9.7,2.3l-22,5.5l1.3,5.9l2.5,10.5l0.5,7.5l-4.3,4.4l2.7,2.9l7.5,-4l5,-4.5l6.5,-1.5l4.5,-2.5l4,-2l5.7,-3.5z",
    name: "Connecticut",
  },
  DE: {
    d: "M803.1,230.7l-0.4,-3l-1.6,-1.4l-2.5,-4.8l1.8,-4.9l1.7,-3.7l6.5,-1.2l3.2,11.6l3.4,15.7l-7.8,2l-4.3,-10.3z",
    name: "Delaware",
  },
  FL: {
    d: "M704.2,421.7l-4,-0.4l-7.9,-2.9l-3.6,-0.6l-3.2,-2.9l-5.6,0.2l-2.9,3.1l3.9,4.9l3.2,8.9l5.5,8.9l3.2,6l3.2,9.3l7.7,13.7l4.5,5.3l2.9,6l5.5,6.3l0,4.5l2.6,7.4l6.6,5.8l1.9,-0.6l1.9,8.2l2.9,7.6l2.9,5.8l-0.3,3.7l3.2,5.3l-0.6,2.4l1.4,3.4l-2.6,4.5l-4.2,-1.9l-4.7,-4.8l-1.3,2.9l4.2,3.9l2.3,4.2l0.6,5l-1.3,6.6l-2.9,-3.4l-1.6,-4.5l-1,-3.9l-3.6,-2.4l-1.3,-4.5l-4.5,-2.4l-3.2,-5.5l-5.8,-4.2l-2.9,-3.9l-4.2,-7.4l-4.2,-3.4l-1.9,-4.5l-4.9,-3.7l-0.3,-3.7l-5.5,-4.4l-5.2,-6l-5.8,-8.9l-1.6,-4.7l0,-5.8l-4.2,-4.9l0.6,-2.6l-4.7,-4.5l-2.3,-5.5l-0.6,-5.5l-6.8,-5l-5.8,-2.7l-5.3,-5.2l-5.3,-2.1l-2.6,-2.4l-8.2,-0.5l-3.7,1.1l-2.9,-2.7l-4.5,-0.6l-1.3,-3.2l-3.6,-0.8l-2.4,1.4l-3.4,3.2l-4.5,-0.8l-3.7,0.6l-4.5,-2.6l0.8,-5.5l-4,-2.4l-0.8,-2.9l1.9,-1.6l-2.7,-6.1l-0.2,-3.4l52.5,-6l19,-2.2l8.8,0l1.4,-4.4l4.5,-0.2l0.5,2.4l13.9,-1.5l3.1,4.2l4.5,1.3l2.3,3.9l6.6,1.3l3.6,3.1z",
    name: "Florida",
  },
  GA: {
    d: "M701.7,328.7l-22.6,3.2l-12.3,1.5l-4.2,-24.9l-2.2,-19.2l-1.1,-15.7l22.4,-2.8l27.2,-3.5l2.9,3.9l4.9,14.5l3.5,5.8l-0.4,7.6l2.5,4.5l3.1,2.9l-0.2,3.4l2.7,6.1l-1.9,1.6l0.8,2.9l4,2.4l-0.8,5.5l4.5,2.6l3.7,-0.6l4.5,0.8l3.4,-3.2l2.4,-1.4l3.6,0.8l1.3,3.2l4.5,0.6l2.9,2.7l3.7,-1.1l8.2,0.5l-2.9,8.8l-4.7,8.6l-3.1,1.9l-2.9,6.3l-0.8,5.3l-3.2,4.2l-1.6,7.9l-3.2,5.8l-2.9,3.4l-0.6,3.9l-2.6,1.6l-0.5,6l-3.4,-0.3l-4.1,-4.2l-4,-1.3l-5.8,-5l-6,-1.5l-4.5,-4.2l-3.5,0.2l-0.6,-2.6l1.6,-4.5l-0.6,-1.6l-6.3,-9.7l-0.8,-3.9l1.3,-3.7l-1.1,-3.9l0.3,-2.6l-5.5,-8.7l-3.2,-7.4z",
    name: "Georgia",
  },
  HI: {
    d: "M233.1,519.3l1.9,-3.6l2.3,0.5l1,1.6l-0.2,2.8l-3.1,1.6l-1.9,-2.9zM243.9,515.5l5.3,-0.2l1.6,3.4l-0.5,2.6l-3.7,0.5l-2.4,-2.1l-0.3,-4.2zM256.3,515.2l2.4,3.2l-2.6,0.8l-1.8,-1.6l2,-2.4zM261.6,519.2l6.3,-1l1.6,1.6l-0.8,3.7l-4.5,2.4l-3.4,-1.9l0.8,-4.8zM274.7,522.4l1.1,-2.4l5.5,-0.2l1.6,1.8l-0.5,3.2l-5.3,2.1l-2.9,-1.6l0.5,-2.9zM298.6,526l11.6,6.9l3.4,3.9l4.2,2.6l-1.3,3.2l3.1,2.4l0,3.1l-5.3,2.7l-5.5,-0.5l-4,-2.1l-3.7,1.4l-4.5,-0.5l-1.6,-4l2.6,-4.7l-2.4,-3.7l-0.5,-5l2.4,-1.3l1.5,-4.4z",
    name: "Hawaii",
  },
  ID: {
    d: "M213.6,60.2l4.5,1l6.1,4.9l0,2.2l3.5,5.3l0.5,2.9l-2.5,4l0.5,3.7l2.9,2.4l1.9,3.1l5.5,4l1.5,3l1.5,1.1l0.3,2.1l-4.7,8.5l-0.8,4.8l0.5,3.5l3,2.5l0.5,1.9l-1.1,2.6l1.3,2.6l-0.3,1.9l1.6,3.9l4.5,4.2l1.3,4.5l3.7,3.2l1.9,1l0.3,1.9l-0.8,5.3l2.7,3.5l-0.5,3.7l-1.8,0.5l-0.5,3.9l1.5,2.6l-0.5,8.4l-0.8,2.6l2.6,2.1l-0.8,8.9l-49.7,9.3l-8.7,-53.6l11.3,-51.3l3.7,-1.1l1.1,-3.9l3.7,-2.6l0.5,-2.6l-2.9,-2.1l0.5,-5l1.9,-4.5l-1.5,-2.6l1.8,-4.7z",
    name: "Idaho",
  },
  IL: {
    d: "M588.2,206.9l0.3,-4.5l2.2,-3.2l0.2,-3l-1.7,-5.9l2,-3l1.2,-6l4.9,-5.3l3.5,-0.3l0.9,-1.1l1,-5.4l-2.8,-11.5l-2.1,-4.9l-0.4,-4l3.5,0l2.5,0.8l5.5,6.6l7.5,4.3l0.9,7.2l5.2,2.1l2.3,0.2l2.5,-1.9l5.5,2.3l2.3,0l2.1,-1.1l0.7,-3.7l4.9,-0.5l1.4,1.6l-1.1,5l0.4,3.2l3.7,4.6l0,5.5l-1.6,1.6l-1.1,4.9l0.5,4.4l4.2,5.4l0.4,5.3l-3.5,1.1l-1.6,2.1l0.5,2.5l-1.2,4.4l-0.9,5l3.9,8.5l7.5,7.5l5.3,2.3l-0.3,5.5l-1.7,2.3l-2.5,0l-1.9,1.6l0.2,1.7l-1.4,2.5l0.2,2l-5.5,3l-4,1.1l-2.8,-0.2l-1.8,2.1l-3.9,-2.1l-3.2,-0.5l-1.9,-2.3l-3.2,0.5l-0.9,-0.5l-4.2,-6.8l-2.4,-8.6l0.6,-5.9l-1.4,-3.5l-2.8,-2.5l0,-3.5l-2.3,-4.4l-2.3,-1.2l0.2,-2.3l-4.9,-7.1l-2.6,-0.5l-1.4,1.2l-3.7,-3l-1.9,0.5l-1.2,-2.3z",
    name: "Illinois",
  },
  IN: {
    d: "M639,198l0,-4l1.9,-0.5l3.7,3l1.4,-1.2l2.6,0.5l4.9,7.1l-0.2,2.3l2.3,1.2l2.3,4.4l0,3.5l2.8,2.5l1.4,3.5l-0.6,5.9l2.4,8.6l4.2,6.8l0.9,0.5l0.6,4.1l-4.9,1.3l-6.9,3.7l-0.4,2.8l-2.3,3l-2.3,1.2l-3,-0.7l-1.4,-1.2l-0.6,1.7l-19,-3.7l1.2,-4.1l2.1,-4.1l1.4,-3.9l-0.2,-2.3l0.9,-6.9l-2.3,-3.7l0.7,-5.5l1.9,-6.4l1.4,-1.6l0.9,-6.6l-0.4,-2.5l2.8,-3.2l1.6,0.3z",
    name: "Indiana",
  },
  IA: {
    d: "M544.9,178.4l2.6,-2.2l-0.3,-2.8l2.8,-4.8l-1,-2.8l-2.6,-2.5l0.4,-3.5l-4.4,-5.3l-0.7,-3.4l1.8,-3.2l-2.1,-3.5l57.6,-3.5l3.5,5.3l5.5,3.8l0.4,4.2l3,3.9l-1.3,6.3l-2.5,3l0.8,1.8l-2.2,4l0.2,3.5l0.9,1.1l0,3.4l-1.8,3.4l-3.4,-0.9l-4.2,1.1l-1.1,1.6l-2.6,0.2l-2.7,-1.1l-5.5,1.5l-3.7,-0.5l-1.7,1.4l-3.4,-0.5l-10.4,-1.7l-3.7,0.5l-2.3,-2.4l-3.2,1.1l-2.2,-1.3l-1.9,1.5l-6.5,-2.5l-3.9,0.5z",
    name: "Iowa",
  },
  KS: {
    d: "M486.8,290.9l-80.5,2.2l-24,-0.7l-13,-0.9l-0.8,-30.9l5.8,-0.1l55.7,-2l54.2,-0.9l2.9,5.4l1.9,3.5l-0.2,6.4l2.2,4.5l-0.5,6.9l-1.8,3l-1.9,3.6z",
    name: "Kansas",
  },
  KY: {
    d: "M680.9,290.2l-2.7,4.9l-5.9,-0.5l-2.6,4l-3.4,3.5l-2.5,-1.7l-1.9,1.4l-6.3,2.1l-1.3,2.7l-4.1,-0.1l-2.4,2.9l-2.1,-0.8l-2.5,4.7l-4.9,3.2l0.3,1.8l-2.7,1l-4.2,-0.3l-1.6,-2.5l-1.8,2.5l-3.5,0.2l-1.6,-1.9l-3.7,1.3l-2.9,3.5l-5.2,-0.5l-3.9,2.9l-3.7,-0.6l-2.5,0.3l-3.4,3.9l-2.5,-0.2l-3.7,1.3l-4.7,-4.3l-0.4,-2.2l0.6,-2.5l3.7,-5.5l6,-4.2l1.4,1l2.3,-3l-0.6,-1.4l3.2,-0.5l1.9,2.3l3.2,0.5l3.9,2.1l1.8,-2.1l2.8,0.2l4,-1.1l5.5,-3l-0.2,-2l1.4,-2.5l-0.2,-1.7l1.9,-1.6l2.5,0l1.7,-2.3l0.3,-5.5l2.5,-3.5l4.4,-2.8l3.7,3l0.8,1.6l4.1,-0.5l1.8,2.5l2.7,-0.2l2.1,2.3l5.5,-4.7l4.7,0.3l2.3,-3.4l4,-0.2l3.5,-3.4l4.1,0l3,-2.3l4.1,0.8l1.1,5.6l3.9,2.2z",
    name: "Kentucky",
  },
  LA: {
    d: "M548.2,431.6l0.4,-2.6l-4.4,-1.1l-1.7,-3l-2,-8.8l2.4,-3.9l-0.2,-6.6l2.7,-2.7l-0.6,-4.2l-1.3,-3.4l0.5,-7.7l5.5,-5.7l-2.3,-1l-0.4,-1.8l0.8,-2l3.4,-2.4l2,-3.2l-1.5,-1.3l3.9,-1.7l41.2,-1.5l-0.9,6.2l2.1,6l4.5,4.5l-2,7l4.3,5.6l-0.3,5.6l-0.3,3.9l-3.7,3.7l-5,0.2l-0.8,4.4l3.1,2.7l-0.6,3.6l-3.4,1.6l1,2.9l-1.9,5.3l3.2,1.9l-0.2,4.2l7.8,3l5.6,-2.1l2.6,1.3l0.5,2.4l3.6,0.5l3.2,2.4l-2.9,0.6l-5.5,-2.3l-5.5,1.5l-1.9,-1.3l-2.6,2.3l3.6,3.9l-0.6,2.6l2.4,2.1l-0.6,1.5l-3.1,-1l-6.3,0.2l-0.8,3.1l1.5,2.1l-3.7,1.5l0,-3.2l-1.5,-2.1l-3.4,0.2l-1.3,1.5l-4.4,-1.5l-0.3,-4.7l-2.3,-0.5l2.1,-2.4l0.2,-4.4l-2.9,-1l-1.9,2.6l-3.1,-0.3l-1.5,-2.7l-4,-0.5l-2.3,1l-0.8,-2.4l-3.1,-1.9l0,-2.9l-2.3,-1.8l-4.4,3.4l-2.6,-1.3l1.1,-2.4l-2.1,-1.3l0.6,-1.8l4.9,-2.4l-1.5,-3.2l-4.9,1.1l-2.9,-0.6l-1.1,-3.2z",
    name: "Louisiana",
  },
  ME: {
    d: "M880.2,59l2.4,0.3l2.8,3.8l2.6,5.7l-1.3,5.3l-2.4,0l-1.6,6.5l4.5,0.7l0.3,2.6l-1,3.9l-2.4,3.9l-1.3,-1.8l-1.6,0.5l-0.5,2.9l1.5,3.2l0.8,4.5l-1.3,3.1l-1,5.6l-2.6,-2.1l-0.5,-3l-0.9,1.4l0.9,2.9l-1.8,4.7l-2.1,1.8l-0.3,-2.1l0.5,-2.4l-1,-0.5l-0.8,2.4l-1.6,-0.8l0,-1.8l1.3,-1.6l0.5,-4.4l1.5,-3.5l0.2,-2.7l-1.5,-4.3l-1,-0.3l-0.9,-1.9l1.1,-1.8l-1,-3.4l0.3,-2.6l-4,-4.7l-0.1,-3.5l-5,-6l-1.6,-0.5l-2.9,-3.4l0,-1.8l-4.8,-3l0,-1.3l-0.8,-0.9l-0.3,-5.3l-3.2,-4.4l-0.2,-2.2l2.9,-2.6l1.9,-3.2l1.8,2.1l4.8,1.6l2.3,-0.5l1.3,-1.3l2.5,0.3l3.5,2.3l0.8,3.2l2.6,0.8l3.1,-2.6l1.6,0.8l3.4,-4.2l2.7,6.5l2.3,0.8z",
    name: "Maine",
  },
  MD: {
    d: "M809.7,237.7l-4.7,-10.4l-8.8,2.1l0.3,4.6l-2.6,0.2l-1.7,-1.5l-1.6,1.5l-1.6,-0.3l-0.8,4.3l-5,0l-2.5,-3l-0.8,-4.5l-3,-3.1l-1.6,-3.5l-4.3,1.7l-3.2,3.9l-2.6,-0.5l-4.2,3.4l-5,0.5l-2.8,1.6l-0.5,1.9l3.9,0.6l0.2,4.6l1.3,3.5l3.7,1.3l4.8,-0.5l2.2,1.9l1.4,-2.2l2.6,-0.3l1.3,1.6l0.2,5.5l-2.2,0.3l-0.5,-1.6l-2.6,0.3l-0.5,3.2l2.6,1.5l-0.3,2.9l-0.5,2.2l-3.5,0.8l-2.4,-0.2l-1.1,2.6l3.9,0.6l1.3,3.4l4.2,0.5l3.4,-3.2l3.2,-5l5.3,-5.5l2.9,5.6l4.5,-0.3l4.7,0.5l4,-1.1l3.2,0.8l1.5,-0.6l3.5,-3.4l0.5,-1.1l-0.3,-3.7l-1.8,-4.3l2.9,-3.5l2.1,-1.6l0.8,-3.7l-1.9,-0.5l-2.1,1.3z",
    name: "Maryland",
  },
  MA: {
    d: "M878.3,163.3l0.6,-2.2l-1.3,-1.9l0.6,-1.1l2.3,1.6l4.2,4.8l-1.1,1.4l-3.9,0.2l-1.4,-2.8zM868.1,165.1l2.5,0.5l1.1,-1l2.6,1.7l-1.7,1.2l-1.9,-0.3l-2.4,-0.8l-0.2,-1.3zM835.7,155.7l1.1,-2.9l2.6,-3.9l1.7,0.2l2.5,-2.3l8.5,-1.3l3.1,4.2l3.7,0.5l1.5,-1.3l4.7,0.2l4.5,1.3l1.5,2.7l4.2,1.8l2.3,-0.2l4.2,3.5l3.2,2.1l3.2,0.2l1.6,1.9l-1.8,2.5l0.8,1.8l-4.4,-0.7l-1.5,-2.8l-4.4,-0.6l0.9,2.9l-2.6,1.1l-2.4,-3.9l-1.5,1l1.9,3.7l1.5,1l-1.8,1.4l-2.3,-2.2l-1.9,1l2.4,2.3l-2.4,2.4l-1.9,-0.5l-3.1,-3.7l-3.1,-1l-6.5,0l-6.8,-1.3l0.2,-5.4l2.5,-0.9l4,-1.5l0.5,-1.8l-2.4,-3.1l-4.4,-0.3l-5.3,0.8l-0.8,2.4l-3.9,0.5l-3.4,-0.8z",
    name: "Massachusetts",
  },
  MI: {
    d: "M613.7,107.6l4.6,-3.2l3,-1.4l4.3,-0.3l1.5,1.9l5.2,0.3l3.1,-1.4l-0.8,-9.5l1.1,-1.4l2.2,0l-0.2,-1.2l3.4,-1.5l4.4,1.6l0.6,2.7l1.7,1.4l-0.5,5.4l3.3,4.9l-1.6,1.9l-1.3,2.8l1.1,2l-1.8,1.2l-4.3,0.6l-2.2,2.8l-0.6,4.2l-2.9,5l-0.5,2.6l1,4.9l-1.6,3.9l0.8,2.5l-0.3,3.4l-2.7,3.9l-1.6,-1.3l-2.3,1.2l-2.6,-0.6l-0.9,0.7l-1.7,-2l-3.2,-0.2l-5.8,-1.6l-2.9,-1l-3.4,-2.9l-3.7,-0.2l-0.5,-0.8l0.7,-2.9l1.9,-3.7l-0.6,-2.6l0.6,-1.8l-0.6,-3.2l-1.4,-2.1l-0.3,-3.6l2.6,-1.7l1.3,-3.5l0.9,-4.3l3.5,-4.5l-0.8,-2.6zM562.5,103.7l0.4,-1.2l2.9,-1.9l2.1,0l3.9,3.9l5.7,3.3l1.4,-0.2l4.7,1.7l0.1,1.9l-2.4,2.7l0.2,1.4l5.4,1.5l4.6,0.4l0.7,1.6l3.9,0.4l0.2,2.2l3.3,3.8l0.9,5l-1.6,1l0.5,5l-1.7,0.7l-0.4,1.2l-2.9,-2.4l-4.3,-0.7l-1.5,-2.2l-3.7,-0.7l-1.7,0.6l-6.3,-1.7l-2.2,0.4l-0.9,1.6l-1.7,-1.6l0.7,-1.8l1,-3.7l-1.3,-1.3l-0.7,-3.1l-3.9,-2.1l-1.7,-2.2l0.7,-2.5l-1.9,-3l-4.5,-2.6l-1.1,-3.1l-2.2,-1.6l0.3,-2.4z",
    name: "Michigan",
  },
  MN: {
    d: "M547.6,86.4l0.7,-4.9l1.8,-5.1l2.1,-2.3l0.7,-2.4l-0.8,-6l-1.9,-4.7l1.3,-2.5l2.9,0.5l0.8,3.7l1.6,2.5l4,0.5l1.5,-0.8l8.7,0l0.2,-5.5l1.9,0l0.5,1.6l2.4,0.8l2.7,-1.1l1.1,-2.1l1.3,1.6l-0.5,4.7l2.6,2.6l7.9,0.7l3.1,1.3l6.1,-2.3l1.1,5.8l1.8,5.5l-2.1,2.1l-0.5,2.4l0.8,3.7l0.3,5.3l3.2,5.5l1.1,5.8l0.2,6l-1.5,2.6l-0.5,5.3l0.5,4.2l1.9,1.9l1.1,3.5l-1.5,3.7l-1.1,6.5l-0.8,2.1l-1.5,-0.3l-3.1,1.3l-5.5,0.3l-0.5,3.9l-1.1,1.5l-4.5,1.5l-4.2,3.6l-1.3,3.7l-57.6,3.5l0.7,-3.9l-1.8,-4.2l-0.3,-5.8l-4.4,-5.5l0,-7.6l-1.9,-4.9l0.4,-3.5l1.6,-3.2l-0.6,-2.9l2.2,-5l1.5,-1.8l-1.3,-2.4l-1.5,-5.5l5.2,-1.5l4,-1.8l3.9,-1l1.6,-3.2l6.3,-1l3.2,-4.5l0.8,-5.5l2.9,-0.3l0.3,-5.8z",
    name: "Minnesota",
  },
  MS: {
    d: "M596.2,430.3l-2.6,-1l-28.5,2.8l-17.8,1.2l-0.4,2.6l1.1,3.2l2.9,0.6l4.9,-1.1l1.5,3.2l-4.9,2.4l-0.6,1.8l2.1,1.3l-1.1,2.4l2.6,1.3l4.4,-3.4l2.3,1.8l0,2.9l3.1,1.9l0.8,2.4l2.3,-1l4,0.5l1.5,2.7l3.1,0.3l1.9,-2.6l2.9,1l-0.2,4.4l-2.1,2.4l2.3,0.5l0.3,4.7l4.4,1.5l1.3,-1.5l3.4,-0.2l1.5,2.1l0,3.2l10.9,-0.7l-0.2,-4.4l1.3,-8l-0.3,-2.6l1.3,-7.9l2.5,-6.5l-1.7,-3.5l3,-8.2l0.7,-6.5l1.7,-4.7l3.7,-5.3l2.7,-0.3l0.3,-3.5l-0.6,-4.9l-3.4,-5l-3.4,0.2l-0.4,-1.8l-1.5,0.8l-2.2,-0.5l-2.6,0.6l-0.9,2.2l-0.7,-1.4l-1.7,-0.5l-1,0.9l0.9,2.9z",
    name: "Mississippi",
  },
  MO: {
    d: "M550.9,267.3l2.2,0.3l3.4,3l2.3,0.3l2.1,-1.5l2.8,0.8l0.9,-0.6l1.5,-3l3.9,-1.1l2.6,-0.3l3.4,-3.2l0.4,-3.2l1.9,-2.5l-0.9,-3l-1.6,-1.2l12.9,-0.8l13.2,-0.3l9.7,0.2l-0.5,5.6l2.8,2.7l4.1,0l0.9,2l-2.5,3.5l-0.3,5.5l-5.3,2.3l-2.5,-0.3l-4.4,2.8l-3.7,-3l-2.5,3.5l-0.2,2.5l1.4,2.8l0,5.2l-2.2,2.3l0,2l1.6,3.5l-0.4,7.5l-4.1,1.5l-2.3,-1.1l-0.9,0.5l-0.4,2.6l-0.3,2.8l-4.9,3.2l-0.6,2.8l4.2,5.2l0.2,4.5l3.8,5.3l-60.8,2.7l0.9,-10.2l-2.5,-11.6l3.1,-7.6l5.3,-8.2l-0.7,-4.9l3.8,-4.9l-1.5,-3.9l2.1,-0.7l2,-4.3l1.5,1.7l2.2,-1.9l-2,-5.6l-2.4,-2.9l0.7,-6.3z",
    name: "Missouri",
  },
  MT: {
    d: "M336.9,56.7l0.9,10.3l-2.6,12l1.1,5.5l-0.8,4.7l-3.4,3.5l1.1,5l2.9,3.7l1.9,1.5l-0.2,2.1l2.1,4.5l2.6,1.1l1.6,2.3l0.5,4.8l1.8,1l0.5,1.3l-1.5,1.3l1.1,2.3l1.3,0.5l2.1,4.5l-1.3,3.9l0.8,2.1l-62.8,6.5l-40.5,3.1l-8.7,-53.6l57.7,-10.6l44,-9.9z",
    name: "Montana",
  },
  NE: {
    d: "M368.4,182.5l5.4,6.2l2.3,0.5l2.6,-1.5l7.1,0.6l5.3,0.2l5.2,2.1l5.8,0.3l6,2.2l3.7,0.3l4.2,1.8l4.7,0.6l5.3,-1.1l3.2,0.2l4,2.4l1.5,6.5l3.2,1.9l3.4,1.3l2.5,2l4.2,1.3l0.8,3.3l11.2,0.2l17.2,-0.7l2,3.4l-2.1,6.5l0.2,4.7l-0.9,8l-55.7,2l-54.4,0.9l-2.3,-28.5l30.5,-1.9l-7.6,-9l-4.4,-8.2l-4.2,-2.8l-3.7,-2z",
    name: "Nebraska",
  },
  NV: {
    d: "M167.2,186.5l-7.5,42.8l-13,72.4l-19.3,3.6l13.8,-90l29.9,-46z",
    name: "Nevada",
  },
  NH: {
    d: "M859.7,147.4l-1.9,1.6l-1.3,-0.2l-1.3,-2.6l-1.8,1.6l-1.8,-0.5l-0.4,1.2l-0.2,4.8l0.8,2.1l-1.1,1.9l0,5.5l-0.8,6.3l-0.2,5l1.5,2.3l-1.7,0.8l-0.5,-0.8l-0.2,-1.8l-0.6,-0.6l-1.3,0.2l-1.9,-1.6l0.3,-1.9l0.8,-0.6l-0.3,-3.2l-1.1,-0.3l-0.2,-1.8l1.3,-2.4l-0.3,-3.1l0.6,-4.4l-1.9,-4.4l-0.8,-6l0.6,-3.7l-0.3,-2.4l-1.6,-1.6l1,-3.5l0.8,-6.3l0.8,-1.3l-0.8,-0.8l0.3,-2.2l5.3,-1.8l0.5,0.6l2.1,7.5l3.8,0.3l0.8,1l0.3,3.4l1.5,1l-0.2,4.2l0.5,1.9l0.8,0.2l0.8,2.6z",
    name: "New Hampshire",
  },
  NJ: {
    d: "M820.7,204.7l-0.6,0.8l-1.3,4.2l0.3,1.9l2.1,1.9l-0.6,2.1l-2.1,1l-0.3,2.3l-1.9,3.9l-1.3,6.1l0,5.5l1.9,2.6l2.9,1.6l0.2,1.5l-1.5,1.1l0.3,2.9l-2.5,0.2l-2.6,-1.8l-1.3,-8.7l-1.5,-2.9l0,-4l-2.9,-3.7l-3.4,-1.5l0.7,-3.9l-1.1,-1.5l1.5,-1.3l1.9,-3.9l4.2,-2.7l1.8,-1.3l0.3,-3.4l2.9,-0.3l4.2,-2.6l0.6,1.6l-0.5,2.3z",
    name: "New Jersey",
  },
  NM: {
    d: "M303.5,386l-1.7,-13.5l-6.5,-43.2l-7.7,-50.4l22.6,-2.3l45.6,-5.2l4.7,42.9l-38.5,5l2.7,16.3l-0.4,47.9l-20.8,2.5z",
    name: "New Mexico",
  },
  NY: {
    d: "M826,146.5l-1.6,3.7l-5.8,4.5l-5.8,3.2l-4,1l-4.5,2.6l-6.1,-0.6l-3.2,1.1l-3.9,3.9l-2.4,5.5l-2.3,-0.2l-1.8,1.1l-7.3,-0.6l-1.6,1.3l1.1,3.5l-3.5,1.5l-4.2,1.3l-3.5,2.1l-0.5,1.9l-2.1,0.6l-3.7,-3.2l-2.1,1.3l-5,-2.6l-4.7,2.4l-5.5,0.5l-5.5,0.5l-11.8,0l-3.2,-2.7l-6.6,-28.8l5.5,-2.5l27.7,-6.1l5.3,-1.1l3.4,4l4.2,0.2l2.6,-2.3l7.6,-1.5l5.3,-0.5l5.8,-2.3l4.7,-0.2l8.4,-4.5l3.1,-3.5l3.2,-5.5l4.5,-4.5l3.4,-1.6l0.2,1.9l-1.6,4.5l-0.6,3.4l2.3,2.4l0.3,2.6l-2.6,4.4l2.3,5.3l2.6,0.8l4.8,-2.1l5,-1.3l3,1.3z",
    name: "New York",
  },
  NC: {
    d: "M818.4,299.2l-4.5,1.3l-4.5,4l-5.3,5.5l-3.2,5l-3.4,3.2l-4.2,-0.5l-1.3,-3.4l-3.9,-0.6l1.1,-2.6l2.4,0.2l3.5,-0.8l0.5,-2.2l0.3,-2.9l-2.6,-1.5l0.5,-3.2l2.6,-0.3l0.5,1.6l2.2,-0.3l-0.2,-5.5l-1.3,-1.6l-2.6,0.3l-1.4,2.2l-2.2,-1.9l-4.8,0.5l-3.7,-1.3l-1.3,-3.5l-0.2,-4.6l-3.9,-0.6l-2.8,3.9l-2.4,0.6l-6.3,5l-5.5,1l-3.2,1.5l-1.8,-0.8l-2.4,2.2l-5.3,2.6l-3.9,3.4l-3.6,-0.3l-3.1,1.9l-4.4,4.7l-4.7,2.3l-3.7,0.5l-3.4,1.6l-4.9,0.4l-2.2,2.4l-2.2,-2.4l-2.4,-0.2l-0.2,-2.4l1.3,-2.6l-0.2,-1.5l1,-4.7l3.1,-2.1l0.9,-1.7l1.5,0.8l4.2,0l2.6,-1.3l5.5,-1.3l5,-2.9l3.9,-1.5l1.1,-1.8l4.7,-3.2l1.3,1.3l1.9,-0.5l1.3,-3.4l2.9,-1.6l2.2,-2.4l0.6,-2.7l2.6,-0.5l2.9,-3.2l2.1,-0.5l0.8,-1.5l3.4,-1.6l0.6,-2.9l3.1,0.2l0.6,-1.3l5.3,-0.8l2.1,-1.5l1.9,0.2l1.1,-1l4.7,0.5l1.1,2.1l3.7,0.6l4.2,-3.9l5,-1.6l3.2,-0.5l3.2,0.8l3.7,5.8l1.3,3.9l5.5,2.9l3,7.5l5.8,0.8l3.4,2.1l-0.6,5.7z",
    name: "North Carolina",
  },
  ND: {
    d: "M441.7,61.5l2.4,6.5l-0.5,6.8l2.6,6.6l1.5,7.4l-0.3,3.9l1.3,3.9l0,7.9l-1.1,5.5l2.7,4.5l-54.1,1.7l-52.5,0.1l-0.9,-10.3l3,-13.7l-1,-5.5l0.5,-4.7l-3.7,-3.2l-0.8,-4.5l4.2,-1.3l7.1,-1.5l2.9,-3.7l2.4,0l2.4,-2.6l0,-2.9l4,-1.1l3.2,1.6l1.8,2.1l3.2,-0.3l3.5,-1.9l3.9,-0.3l4,-0.2l2.1,-1.5l10.8,0.3l1.9,0.8l5,-1.6l9.5,0.3l4.5,-0.5l6.3,1.3l5.5,0.8l3.1,1.3l3.9,0z",
    name: "North Dakota",
  },
  OH: {
    d: "M694.3,198.7l3.2,0.5l5,-2.9l6.3,-1.6l4.4,0.5l1.5,2.6l7.6,5.8l5.5,0.6l4.7,3.9l4.5,1l0.2,3.4l-2.4,2.6l0.5,2.6l-5.3,5.5l-2.7,3.9l-2.4,6.3l-3.2,4.4l1.3,2.4l-2.9,3.4l-3.2,2.1l-1.5,2.3l-3.4,2.6l-5.8,3.7l-3.5,-3l-12.1,5.8l-2.1,-1.8l-3,2l-5,0.5l-4.7,2.3l-3.3,-4.1l-2.9,0.2l-2.4,-3.2l-4.4,0.5l-0.6,1.8l-4.2,0.2l-4,3.4l-4.1,0l-3,-2.3l-4.1,-0.8l1.1,-5.6l-3.9,-2.2l-0.8,-1.6l3,-0.7l0.6,-1.7l1.4,1.2l3,0.7l2.3,-1.2l2.3,-3l0.4,-2.8l6.9,-3.7l4.9,-1.3l-0.6,-4.1l3.2,-0.5l1.4,-0.9l4.2,3.2l3.5,-3.7l5.5,-2.9l2.9,-0.6l0,-2.4l2.4,-3.4l-1.4,-2.1l3.9,-6.6l3.2,-3.5l1.5,-4.2l4.7,-3.5z",
    name: "Ohio",
  },
  OK: {
    d: "M368.3,339.4l-0.3,-5.7l0.8,-10l-2.5,-8.2l0.5,-13.2l-0.7,-7.6l80.5,-2.2l-0.2,15l5.6,-0.1l1.5,1.3l2.6,0.9l3.5,-2.7l1.5,-0.5l3.9,1l1.9,1.6l4.2,-3.9l1.6,-0.3l1.3,2.3l4.5,-3.2l3.1,0.6l1.9,-1.9l2.3,0.3l4.2,-2.6l2.3,1.5l3.9,-0.5l3.9,-3l3.4,1.5l2.7,-2.3l3.5,0.5l2.3,3.4l2.6,-0.2l0.2,3.4l3.7,2l1.6,1.8l0,5.7l2.1,1.8l-1.3,2.5l1.5,4l-1.3,3.2l0.8,1.5l-0.8,6l-41.2,1.5l-3.9,1.7l1.5,1.3l-2,3.2l-3.4,2.4l-0.8,2l0.4,1.8l2.3,1l-5.5,5.7l-0.5,7.7l1.3,3.4l-51.9,3.9l-0.1,-4.5l-3.2,-2.9l0,-2.9l-2.6,-2.2l0.2,-2.6l-3.4,-2.1l-2.3,1.3l-1.9,-2.7l-3.9,0l-1.1,1.1l-2.9,-1l-4.5,2.4l-2.4,-1.8z",
    name: "Oklahoma",
  },
  OR: {
    d: "M167.2,186.5l-30,46.5l-36.9,7.2l-12.7,-4.9l-1.5,-4.1l-5.5,-2l-2.9,-7l0.5,-4.9l3.2,-4.6l0,-3.9l-2.3,-3.5l0,-2.4l4,-4.8l1.6,-4.7l0.8,-5.5l3.5,-5.2l3.5,-0.2l3.9,-5.6l5.5,-0.5l0.8,-2.6l4,-1.8l1.8,-7l6,-6.6l-0.8,-3.7l1.5,-2.3l-0.8,-4.8l2.7,1.1l4.4,-1.1l4.2,1.8l4.8,0.5l5.3,2.7l4.4,-0.3l0.3,1.8l-3.2,6l0.5,3.1l1.6,2.6l-1.6,5.5l-0.5,5.2l-1.3,3.2l3.2,3.5l35.3,-7.4z",
    name: "Oregon",
  },
  PA: {
    d: "M820.7,204.7l-0.5,-2.3l-0.6,-1.6l-4.2,2.6l-2.9,0.3l-0.3,3.4l-1.8,1.3l-4.2,2.7l-1.9,3.9l-1.5,1.3l1.1,1.5l-0.7,3.9l-2.4,-0.1l-8.8,4l-5.2,-0.2l-3.2,1.8l-2.7,-0.5l-0.5,-1.5l-68.2,12.3l2.2,-4.2l5.5,-8.7l3.2,-2.6l3.2,-1.3l3.5,-5l6.1,-3.9l4.5,-1.1l3.9,-2.6l1.9,1.3l2.6,-1.3l3.5,-3.4l3.5,2l1.9,5.2l4,-0.2l7.4,-2.4l5,-1.8l4.5,-0.5l3.2,1.1l11.8,0l5.5,-0.5l5.5,-0.5l4.7,-2.4l5,2.6l2.1,-1.3l3.7,3.2z",
    name: "Pennsylvania",
  },
  RI: {
    d: "M865.3,171.1l-0.8,-3.6l-0.3,-4.8l1.3,-1.6l3.5,0.8l3.4,4.4l-0.5,1.8l-2.9,1.1l-1.1,3.1l-2.6,-1.2z",
    name: "Rhode Island",
  },
  SC: {
    d: "M736.1,355.7l-3.2,-2.6l-4.2,-1l-1.1,-2.4l-2.9,-1.5l-3.1,-4l-5.8,-5.2l-3.1,1.3l-1.5,-1.6l1.5,-3.4l-0.5,-5.2l-4.2,-7.1l0.6,-3.9l2.9,-3.4l3.2,-5.8l1.6,-7.9l3.2,-4.2l0.8,-5.3l2.9,-6.3l3.1,-1.9l4.7,-8.6l3.4,0.3l0.5,-6l2.6,-1.6l0.6,-3.9l5.2,0.5l2.9,-3.5l3.7,-1.3l1.6,1.9l3.5,-0.2l1.8,-2.5l1.6,2.5l4.2,0.3l2.7,-1l-0.3,-1.8l4.9,-3.2l2.5,-4.7l2.1,0.8l2.4,-2.9l4.1,0.1l1.3,-2.7l2.9,1.3l4.9,-0.4l3.4,-1.6l3.7,-0.5l4,-4.2l-4.2,10.8l-6.5,3.7l-1.8,3.4l-8.1,4.5l-3.2,4l-4.5,4.4l-4.4,7.4l-5.2,5.3l-2.6,4.4l-2.9,7.4l-2.4,3.4l-0.8,4l-3.9,4.4l-0.3,3.5l-3.4,5.5l-0.6,4l0.8,1.8l-3.7,8.2l-4.7,2.3z",
    name: "South Carolina",
  },
  SD: {
    d: "M443.8,121.6l0,-7.9l-1.3,-3.9l0.3,-3.9l-1.5,-7.4l-2.6,-6.6l0.5,-6.8l-2.4,-6.5l54.1,-1.7l52.5,-0.1l1.3,6.3l1.3,20.7l0.8,20.9l-5.9,0.3l-57.3,2.1l-3.4,-1.3l-3.2,-1.9l-1.5,-6.5l-4,-2.4l-3.2,-0.2l-5.3,1.1l-4.7,-0.6l-4.2,-1.8l-3.7,-0.3l-6,0.5z",
    name: "South Dakota",
  },
  TN: {
    d: "M683.6,328l-1.1,-3.7l-4.4,-5.8l1,-2.3l-1,-2l1.3,-4.8l3.2,-3l2.9,-5.2l3.9,-2.6l0,-3.4l-2.3,-2.6l2.7,-4.9l-27.2,3.5l-22.4,2.8l-21.3,1.8l-24.7,2.4l-2.9,-0.2l-3.7,2.6l-5,0.6l1,-3.9l-0.6,-2.3l2.4,-2.1l-0.8,-2.3l-2.3,-1.1l-1.4,1l-4.8,-4l-3.2,0.6l-0.6,1l-1.6,-0.8l1.3,-4l4.9,-3.2l0.4,-2.6l0.9,-0.5l2.3,1.1l4.1,-1.5l0.4,-7.5l-1.6,-3.5l0,-2l46.7,-4.4l4.7,4.3l3.7,-1.3l2.5,0.2l3.4,-3.9l2.5,-0.3l3.7,0.6l3.9,-2.9l5.2,0.5l2.9,-3.5l3.7,-1.3l0.8,2.3l4.5,4.5l0.3,1.9l-3.2,0.6l-0.8,1.3l0.6,1.9l-3.9,3.7l-1.6,4.7l-4.5,4.4l-0.6,5.2l-1.8,2.9l0,5.2l-1.3,6.3l2.3,3l-1.3,2.4l2.4,3.5l1.8,0.6l-0.2,3.2l-6.6,0.6l-1,1.3l-5.8,0.3l-3.4,2.6l-3.7,-0.3l-3.5,2.6z",
    name: "Tennessee",
  },
  TX: {
    d: "M304.7,388.7l51.9,-3.9l20.8,-2.5l0.4,-47.9l-2.7,-16.3l38.5,-5l-4.7,-42.9l13,0.9l24,0.7l0.8,30.9l0.5,13.2l2.5,8.2l-0.8,10l0.3,5.7l2.4,1.8l4.5,-2.4l2.9,1l1.1,-1.1l3.9,0l1.9,2.7l2.3,-1.3l3.4,2.1l-0.2,2.6l2.6,2.2l0,2.9l3.2,2.9l0.1,4.5l0.6,4.2l-2.7,2.7l0.2,6.6l-2.4,3.9l2,8.8l1.7,3l4.4,1.1l1.3,2.3l3.4,2l2.9,0.5l1.5,3.5l3.4,0.3l2.6,2l2.4,0.2l2.6,1.8l1.6,3.2l0.5,2.4l2.9,0.8l2.3,2.1l-1,2l1.8,1l2.4,-0.5l2.4,0.8l1.5,1.5l0.6,4.9l3.1,3.6l-0.3,3.4l1.9,1.1l-0.6,4l1.1,2.4l-0.6,2.3l0.8,1.9l-0.8,4.5l2.6,3.9l1.3,4.5l2.1,2.4l0.8,2.9l1.9,2.1l1.6,4l0.8,4.2l3.1,5l-1.5,0.3l-5.2,-3.1l-2.9,0.8l-1.8,3.7l-2.7,1l-0.5,1.3l0.5,1.5l-1.8,3.1l-2.3,0.8l-1.6,4.5l-3.2,3.2l-0.5,3.7l-3.4,0.6l-5.5,3.9l-2.6,4.2l-4,2.6l-1.9,3.2l-4.5,3.1l-4.2,1.6l-6.1,4.7l-4,1.9l-4.5,1.1l-0.5,1.6l-4.7,3.4l-0.6,2.3l-2.6,2.1l-3.5,-1.3l-3.9,1.8l-2.4,-0.5l-1.9,1l-4.2,-3.5l-3.4,-0.2l-4.2,-1.3l-3.2,-2.7l-5,-1.5l-6.6,-4.5l-5,-1.5l-1.9,-3.1l-0.3,-4l-5.5,-5.3l0,-2.1l-1.9,-4.2l-0.5,-4.5l-1.5,-0.3l-0.3,-2.3l-3.2,-2.3l0.2,-2l-2.3,-2.9l-3.5,-1.6l-1.5,-1.9l0,-2.7l-5,-6.5l-2.4,-1.3l0,-1.5l-4.7,-4l-0.5,-1.6l-5.3,-1.8l-0.5,-2.6l-2.7,-0.6l-2.9,-2.1l-0.5,-2.1l-2.7,-1.1l-3.7,-5.8l-3.7,-1.9l-0.8,-2.1l-1.9,-1.3l-0.8,-1.9l-4.7,-2.1l-2.1,-2.6l-6.5,-1.3l-5,-4.5l-3.4,1.3l-6.1,-2.6l-0.6,-2.9l-6.6,-4l2.4,-8z",
    name: "Texas",
  },
  UT: {
    d: "M255,214.3l-27.2,5.8l-7.5,42.8l-1.8,15.6l23.3,-3l-9.5,-42l67.9,-6.2l-22.6,-90.7l-35.6,7l6.9,41.7l6.1,29z",
    name: "Utah",
  },
  VT: {
    d: "M845.1,96.9l1.6,3.8l-1.5,4l1.5,4.5l-0.8,4.2l2.6,5.8l-0.2,3.5l3.7,3.7l0.2,3l-0.6,4.4l1.1,4.7l0.5,3.4l-0.3,5.6l-11.5,2.3l-0.8,-0.8l-1.6,0.8l-1.3,2.4l0.2,1.8l1.1,0.3l0.3,3.2l-0.8,0.6l-0.3,1.9l1.9,1.6l-0.6,4l-1.5,-2.3l0.2,-5l0.8,-6.3l-0.2,-5.5l-0.8,-2.1l0.2,-4.8l0.4,-1.2l1.8,0.5l1.8,-1.6l1.3,2.6l1.3,0.2l1.9,-1.6l-0.8,-2.6l-0.8,-0.2l-0.5,-1.9l0.2,-4.2l-1.5,-1l-0.3,-3.4l-0.8,-1l-3.8,-0.3l-2.1,-7.5l-0.5,-0.6l-5.3,1.8l-0.3,2.2l0.8,0.8l-0.8,1.3l0.5,-4.4l0.5,-6.5l3.1,-1.1l1.5,-3.1l2.1,-1.8l0.3,-2.6l5.8,-1.6z",
    name: "Vermont",
  },
  VA: {
    d: "M809.7,237.7l2.1,-1.3l1.9,0.5l-0.8,3.7l-2.1,1.6l-2.9,3.5l1.8,4.3l0.3,3.7l-4.5,5.5l-1.6,4l0.6,3.2l-2.1,3.2l-0.3,2.6l5.8,5l2.4,0.2l0.5,1.5l3.5,0.6l2.3,2.1l2.1,-0.6l6.5,3.7l3.4,-1.3l2.6,0.3l-1.6,5.3l-2.9,-0.2l-0.5,3.4l1.5,1.1l-2.9,4.7l-3.7,-1l-0.6,5.7l-4.5,-1.3l0.6,-5.7l-3.4,-2.1l-5.8,-0.8l-3,-7.5l-5.5,-2.9l-1.3,-3.9l-3.7,-5.8l-3.2,-0.8l-3.2,0.5l-5,1.6l-4.2,3.9l-3.7,-0.6l-1.1,-2.1l-4.7,-0.5l-1.1,1l-1.9,-0.2l-2.1,1.5l-5.3,0.8l-0.6,1.3l-3.1,-0.2l-0.6,2.9l-3.4,1.6l-0.8,1.5l-2.1,0.5l-2.9,3.2l-2.6,0.5l-0.6,2.7l-2.2,2.4l-2.9,1.6l-1.3,3.4l-1.9,0.5l-1.3,-1.3l-4.7,3.2l-1.1,1.8l0.2,-2.5l1.5,-1.1l-0.2,-3.5l2.4,-3l0.2,-3.2l1.5,-3.5l0.3,-3.7l2.9,-5l1.5,-5.8l5.2,-0.6l2.5,-2.1l1.1,-1.8l2.6,-1l0.2,-1.5l1.6,-2.1l-0.6,-2.4l2.9,-0.3l4.5,-3.9l2.7,-0.3l-0.5,1.9l3.7,0.6l2.7,-2.6l0.8,1.9l3.7,0.6l3.4,-3.4l5,-0.5l2.8,-1.6l5,-0.5l4.2,-3.4l2.6,0.5l3.2,-3.9l4.3,-1.7l1.6,3.5l3,3.1l0.8,4.5l2.5,3l5,0l0.8,-4.3l1.6,0.3l1.6,-1.5l1.7,1.5l2.6,-0.2l-0.3,-4.6l8.8,-2.1l4.7,10.4z",
    name: "Virginia",
  },
  WA: {
    d: "M168.5,26.5l-0.5,5l-2.9,0.5l-1.3,3.2l-1.9,0.5l-0.3,4.5l2.4,1.1l-0.2,11.1l-4.2,0.5l-2.1,2.1l-0.6,4l1.5,1.6l-0.8,2.9l-5.5,0.5l-3.9,5.6l-3.5,0.2l-3.5,5.2l-0.8,5.5l-1.6,4.7l-4,4.8l0,-2.6l-3.5,-2.6l0.5,-2.4l2.6,-1.1l0.5,-5.5l-3.1,-1.1l0,-3.7l2.9,-0.5l0.5,-8.4l-1,-3.9l0,-5.5l2.3,-8.4l2.4,-0.8l2.4,-5.3l-0.8,-5.8l1.5,-3.7l-1.6,-0.8l-0.3,-3.5l3.4,1.1l6.6,2.3l6.9,1.1l3.9,1.5l5.8,1.1l3.7,0.5l2.4,1l5,0.5z",
    name: "Washington",
  },
  WV: {
    d: "M733.9,243.6l2.7,0.3l3.2,-1.8l5.2,0.2l1.9,-1.5l-0.8,-5.2l4.5,-0.2l4,-1.9l3.5,-1.5l-3.9,-2.1l-3.7,-0.8l-0.6,-1.5l-4.5,4.4l-2.2,0.8l-3.9,0.5l-2.1,1.6l-1.1,2.9l-4.2,3l-1.6,4.2l-4,3.9l0.5,2.3l-0.3,4.5l2.4,4.5l0.5,2.1l-1.3,0.8l-0.2,5.2l3.5,3l-3.7,0.3l-0.5,-1.5l-3.7,-0.6l-0.8,-1.9l0.5,-1.9l-2.7,0.3l-0.8,1.9l-3.7,-0.6l0.6,-2.4l-1.6,-2.1l2.9,-5l0.3,-4.5l2.1,-1.6l1.1,-5.2l1.8,-4.5l-0.5,-3l1.8,-1l1.3,2.4l3.2,-1l1.5,1.9l3.2,-2.3l-0.8,-3.5l3.2,-1z",
    name: "West Virginia",
  },
  WI: {
    d: "M543.9,94.9l0.6,1.8l2.2,1.6l1.1,3.1l4.5,2.6l1.9,3l-0.7,2.5l1.7,2.2l3.9,2.1l0.7,3.1l1.3,1.3l-1,3.7l-0.7,1.8l1.7,1.6l0.9,-1.6l2.2,-0.4l6.3,1.7l1.7,-0.6l3.7,0.7l1.5,2.2l4.3,0.7l2.9,2.4l0.4,-1.2l1.7,-0.7l-0.5,-5l1.6,-1l-0.9,-5l-3.3,-3.8l-0.2,-2.2l-3.9,-0.4l-0.7,-1.6l-4.6,-0.4l-5.4,-1.5l-0.2,-1.4l2.4,-2.7l-0.1,-1.9l-4.7,-1.7l-0.1,-0.6l-1.4,0.2l-5.7,-3.3l-2.9,-3.9l-1.9,-0.1l0.6,-3l-0.8,-3.2l-2.3,-1.6l-0.8,-2.6l-2.1,-1.3l-1.1,-3.2l0.5,-2.9l-2.1,-3.9l-3.5,2.6l-4.5,1.3l-1.3,3.4l-1.6,2.7l0.3,1.9l-2.6,2.3l-0.5,1.3l-2.9,2.4l-1.8,4.8l1.3,2.4l-1.5,1.8l-2.2,5l0.6,2.9l-1.6,3.2l-0.4,3.5l1.9,4.9l0,7.6l4.4,5.5l0.3,5.8l1.8,4.2l-0.7,3.9l3.9,-0.5l6.5,2.5l1.9,-1.5l2.2,1.3l3.2,-1.1l2.3,2.4l3.7,-0.5l10.4,1.7l3.4,0.5l-2.6,4.8l0.3,2.8l-2.6,2.2l-0.3,1.6l-4,-2.4l-5.2,-0.3l-3.2,0.2l-4.7,0.6l-3.4,-1.3l-0.8,-3.3l-4.2,-1.3l-2.5,-2l-3.4,-1.3l-3.2,-1.9l0.5,-2.6l-3.2,-0.2l-2.6,1.5l-2.3,-0.5l-5.4,-6.2l0,-4l3.7,2l4.2,2.8l4.4,8.2l5.6,5l-2.7,-5l-5.2,-7.3l-3.7,-3.7l0.3,-9.2l-1.1,-1.1l1,-6.8l-1.9,-1.9l-0.5,-4.2l0.5,-5.3l1.5,-2.6l-0.2,-6l-1.1,-5.8l-3.2,-5.5l-0.3,-5.3l-0.8,-3.7l0.5,-2.4l2.1,-2.1l0.3,0l6.5,3.9l3.1,0.3l1,0.5l3.5,0l3.9,1.8l5.8,0.5z",
    name: "Wisconsin",
  },
  WY: {
    d: "M336.2,144.6l-6,-0.5l-5.8,-0.3l-5.2,-2.1l-5.3,-0.2l-7.1,-0.6l-2.6,1.5l-2.3,-0.5l-5.4,-6.2l-5.5,0.3l-6.1,-0.6l-0.2,-8.9l50.7,-5l6.4,40.9l5.5,34.6l-62.5,5.6l-4.3,-29l35.6,-7l6.1,-29z",
    name: "Wyoming",
  },
  DC: {
    d: "M773.2,253.5l1.6,-2.4l2.9,2.4l-1.3,1.9l-1.6,0.6l-1.6,-2.5z",
    name: "District of Columbia",
  },
};

// State center coordinates for senator dots
const stateCenters: Record<string, { x: number; y: number }> = {
  AL: { x: 630, y: 385 },
  AK: { x: 170, y: 500 },
  AZ: { x: 230, y: 365 },
  AR: { x: 540, y: 360 },
  CA: { x: 130, y: 300 },
  CO: { x: 315, y: 290 },
  CT: { x: 830, y: 190 },
  DE: { x: 798, y: 255 },
  FL: { x: 695, y: 445 },
  GA: { x: 685, y: 370 },
  HI: { x: 280, y: 525 },
  ID: { x: 215, y: 145 },
  IL: { x: 585, y: 270 },
  IN: { x: 625, y: 270 },
  IA: { x: 515, y: 220 },
  KS: { x: 420, y: 300 },
  KY: { x: 635, y: 305 },
  LA: { x: 560, y: 420 },
  ME: { x: 865, y: 110 },
  MD: { x: 760, y: 260 },
  MA: { x: 855, y: 175 },
  MI: { x: 620, y: 175 },
  MN: { x: 505, y: 145 },
  MS: { x: 595, y: 390 },
  MO: { x: 545, y: 305 },
  MT: { x: 275, y: 105 },
  NE: { x: 410, y: 240 },
  NV: { x: 175, y: 260 },
  NH: { x: 847, y: 155 },
  NJ: { x: 810, y: 230 },
  NM: { x: 295, y: 365 },
  NY: { x: 780, y: 175 },
  NC: { x: 745, y: 320 },
  ND: { x: 400, y: 105 },
  OH: { x: 680, y: 255 },
  OK: { x: 440, y: 350 },
  OR: { x: 145, y: 145 },
  PA: { x: 765, y: 220 },
  RI: { x: 858, y: 185 },
  SC: { x: 715, y: 345 },
  SD: { x: 400, y: 165 },
  TN: { x: 630, y: 325 },
  TX: { x: 410, y: 420 },
  UT: { x: 250, y: 280 },
  VT: { x: 835, y: 140 },
  VA: { x: 755, y: 280 },
  WA: { x: 155, y: 75 },
  WV: { x: 720, y: 270 },
  WI: { x: 560, y: 175 },
  WY: { x: 300, y: 185 },
  DC: { x: 780, y: 255 },
};

// Get state abbreviation from full name
const stateNameToAbbr: Record<string, string> = {
  'Alabama': 'AL', 'Alaska': 'AK', 'Arizona': 'AZ', 'Arkansas': 'AR', 'California': 'CA',
  'Colorado': 'CO', 'Connecticut': 'CT', 'Delaware': 'DE', 'Florida': 'FL', 'Georgia': 'GA',
  'Hawaii': 'HI', 'Idaho': 'ID', 'Illinois': 'IL', 'Indiana': 'IN', 'Iowa': 'IA',
  'Kansas': 'KS', 'Kentucky': 'KY', 'Louisiana': 'LA', 'Maine': 'ME', 'Maryland': 'MD',
  'Massachusetts': 'MA', 'Michigan': 'MI', 'Minnesota': 'MN', 'Mississippi': 'MS', 'Missouri': 'MO',
  'Montana': 'MT', 'Nebraska': 'NE', 'Nevada': 'NV', 'New Hampshire': 'NH', 'New Jersey': 'NJ',
  'New Mexico': 'NM', 'New York': 'NY', 'North Carolina': 'NC', 'North Dakota': 'ND', 'Ohio': 'OH',
  'Oklahoma': 'OK', 'Oregon': 'OR', 'Pennsylvania': 'PA', 'Rhode Island': 'RI', 'South Carolina': 'SC',
  'South Dakota': 'SD', 'Tennessee': 'TN', 'Texas': 'TX', 'Utah': 'UT', 'Vermont': 'VT',
  'Virginia': 'VA', 'Washington': 'WA', 'West Virginia': 'WV', 'Wisconsin': 'WI', 'Wyoming': 'WY',
};

// Group senators by state
function groupSenatorsByState(senators: Senator[]): Record<string, Senator[]> {
  const byState: Record<string, Senator[]> = {};
  senators.forEach((senator) => {
    const abbr = stateNameToAbbr[senator.state];
    if (abbr) {
      if (!byState[abbr]) byState[abbr] = [];
      byState[abbr].push(senator);
    }
  });
  return byState;
}

export function USAMap() {
  const [hoveredState, setHoveredState] = useState<string | null>(null);
  const [tooltipPos, setTooltipPos] = useState({ x: 0, y: 0 });
  const [senators, setSenators] = useState<Senator[]>([]);
  const [senatorsByState, setSenatorsByState] = useState<Record<string, Senator[]>>({});

  // Fetch real senators on mount
  useEffect(() => {
    fetchSenators().then(data => {
      setSenators(data);
      setSenatorsByState(groupSenatorsByState(data));
    });
  }, []);

  const handleMouseEnter = (abbr: string, e: React.MouseEvent) => {
    const rect = (e.currentTarget as SVGElement).closest('svg')?.getBoundingClientRect();
    if (rect) {
      setTooltipPos({
        x: e.clientX - rect.left,
        y: e.clientY - rect.top,
      });
    }
    setHoveredState(abbr);
  };

  return (
    <div className="relative overflow-hidden rounded-xl bg-[#0a0a0f]/80 backdrop-blur-xl border border-white/[0.06] p-6">
      {/* Header */}
      <div className="flex items-center justify-between mb-6">
        <div>
          <h3 className="text-lg font-semibold text-white">National Surveillance Grid</h3>
          <p className="text-xs text-[#6b6b7a]">Hover over states to view senators</p>
        </div>
        <div className="flex items-center gap-4 text-xs">
          <div className="flex items-center gap-2">
            <div className="w-3 h-3 rounded-full bg-red-500 shadow-[0_0_8px_rgba(239,68,68,0.5)]" />
            <span className="text-[#6b6b7a]">Republican</span>
          </div>
          <div className="flex items-center gap-2">
            <div className="w-3 h-3 rounded-full bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]" />
            <span className="text-[#6b6b7a]">Democrat</span>
          </div>
          <div className="flex items-center gap-2">
            <div className="w-3 h-3 rounded-full bg-purple-500 shadow-[0_0_8px_rgba(168,85,247,0.5)]" />
            <span className="text-[#6b6b7a]">Independent</span>
          </div>
        </div>
      </div>

      {/* Map Container */}
      <div className="relative w-full aspect-[1.6/1] min-h-[400px]">
        {/* Grid overlay effect */}
        <div
          className="absolute inset-0 pointer-events-none opacity-20 z-10"
          style={{
            backgroundImage:
              'linear-gradient(rgba(59,130,246,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(59,130,246,0.1) 1px, transparent 1px)',
            backgroundSize: '30px 30px',
          }}
        />

        {/* SVG Map */}
        <svg viewBox="60 20 860 540" className="w-full h-full" preserveAspectRatio="xMidYMid meet">
          {/* State shapes */}
          {Object.entries(statePaths).map(([abbr, state]) => {
            const stateSenators = senatorsByState[abbr] || [];
            const hasConflicts = stateSenators.some((s) => s.conflicts.length > 0);
            const hasSenators = stateSenators.length > 0;
            const isHovered = hoveredState === abbr;

            return (
              <g key={abbr}>
                <path
                  d={state.d}
                  fill={
                    isHovered
                      ? 'rgba(59,130,246,0.3)'
                      : hasConflicts
                      ? 'rgba(245,158,11,0.15)'
                      : hasSenators
                      ? 'rgba(59,130,246,0.1)'
                      : 'rgba(59,130,246,0.05)'
                  }
                  stroke={
                    isHovered
                      ? 'rgba(59,130,246,0.8)'
                      : hasConflicts
                      ? 'rgba(245,158,11,0.4)'
                      : 'rgba(59,130,246,0.3)'
                  }
                  strokeWidth={isHovered ? 2 : 1}
                  className="transition-all duration-200 cursor-pointer"
                  onMouseEnter={(e) => handleMouseEnter(abbr, e)}
                  onMouseLeave={() => setHoveredState(null)}
                  onMouseMove={(e) => {
                    const rect = (e.currentTarget as SVGElement).closest('svg')?.getBoundingClientRect();
                    if (rect) {
                      setTooltipPos({
                        x: e.clientX - rect.left,
                        y: e.clientY - rect.top,
                      });
                    }
                  }}
                  style={{
                    filter: isHovered ? 'drop-shadow(0 0 10px rgba(59,130,246,0.5))' : 'none',
                  }}
                />
              </g>
            );
          })}

          {/* Senator dots on states - CLICKABLE */}
          {Object.entries(stateCenters).map(([abbr, center]) => {
            const stateSenators = senatorsByState[abbr] || [];
            if (stateSenators.length === 0) return null;

            return (
              <g key={`dots-${abbr}`}>
                {stateSenators.map((senator, idx) => {
                  const offsetX = stateSenators.length > 1 ? (idx === 0 ? -8 : 8) : 0;
                  const offsetY = stateSenators.length > 1 ? (idx === 0 ? -3 : 3) : 0;
                  const partyColor = getPartyColor(senator.party);

                  return (
                    <Link key={senator.id} href={`/politician/${senator.id}`}>
                      <g className="cursor-pointer" style={{ pointerEvents: 'all' }}>
                        {/* Pulse animation */}
                        <circle
                          cx={center.x + offsetX}
                          cy={center.y + offsetY}
                          r="12"
                          fill={partyColor}
                          opacity="0.2"
                          className="animate-ping"
                          style={{ animationDuration: '2s' }}
                        />
                        {/* Glow */}
                        <circle
                          cx={center.x + offsetX}
                          cy={center.y + offsetY}
                          r="10"
                          fill={`${partyColor}40`}
                        />
                        {/* Main dot */}
                        <circle
                          cx={center.x + offsetX}
                          cy={center.y + offsetY}
                          r="6"
                          fill={partyColor}
                          stroke="white"
                          strokeWidth="2"
                          className="hover:r-8 transition-all"
                          style={{
                            filter: `drop-shadow(0 0 6px ${partyColor})`,
                          }}
                        />
                        {/* Conflict indicator */}
                        {senator.conflicts.length > 0 && (
                          <circle
                            cx={center.x + offsetX + 5}
                            cy={center.y + offsetY - 5}
                            r="4"
                            fill="#f59e0b"
                            stroke="#0a0a0f"
                            strokeWidth="1"
                            className="animate-pulse"
                          />
                        )}
                        {/* Invisible larger hit area */}
                        <circle
                          cx={center.x + offsetX}
                          cy={center.y + offsetY}
                          r="15"
                          fill="transparent"
                        />
                      </g>
                    </Link>
                  );
                })}
              </g>
            );
          })}
        </svg>

        {/* Tooltip */}
        <AnimatePresence>
          {hoveredState && senatorsByState[hoveredState] && senatorsByState[hoveredState].length > 0 && (
            <motion.div
              initial={{ opacity: 0, scale: 0.9 }}
              animate={{ opacity: 1, scale: 1 }}
              exit={{ opacity: 0, scale: 0.9 }}
              className="absolute z-50 pointer-events-none"
              style={{
                left: Math.min(Math.max(tooltipPos.x - 125, 10), 500),
                top: Math.max(tooltipPos.y - 150, 10),
              }}
            >
              <div className="bg-[#0a0a0f]/95 border border-white/[0.15] rounded-lg p-4 shadow-2xl min-w-[260px] backdrop-blur-xl">
                <div className="text-sm font-semibold text-white mb-3 flex items-center gap-2">
                  <span>{statePaths[hoveredState]?.name}</span>
                  <span className="text-xs text-[#6b6b7a] font-mono">({hoveredState})</span>
                </div>
                <div className="space-y-3">
                  {senatorsByState[hoveredState].map((senator) => (
                    <Link
                      key={senator.id}
                      href={`/politician/${senator.id}`}
                      className="flex items-center gap-3 p-2 rounded-lg hover:bg-white/[0.05] transition-colors pointer-events-auto"
                    >
                      <div
                        className="w-10 h-10 rounded-full overflow-hidden shrink-0"
                        style={{
                          boxShadow: `0 0 0 2px ${getPartyColor(senator.party)}`,
                        }}
                      >
                        <Image
                          src={senator.photo}
                          alt={senator.name}
                          width={40}
                          height={40}
                          className="w-full h-full object-cover"
                          unoptimized
                        />
                      </div>
                      <div className="flex-1 min-w-0">
                        <div className="text-sm font-medium text-white truncate">
                          {senator.name}
                        </div>
                        <div className="flex items-center gap-2 text-xs text-[#6b6b7a]">
                          <span
                            className={cn(
                              senator.party === 'R'
                                ? 'text-red-400'
                                : senator.party === 'D'
                                ? 'text-blue-400'
                                : 'text-purple-400'
                            )}
                          >
                            {senator.party === 'R' ? 'Republican' : senator.party === 'D' ? 'Democrat' : 'Independent'}
                          </span>
                          <span>â€¢</span>
                          <span>{senator.stockTrades} trades</span>
                        </div>
                      </div>
                      {senator.conflicts.length > 0 && (
                        <AlertTriangle className="w-4 h-4 text-amber-400 shrink-0" />
                      )}
                    </Link>
                  ))}
                </div>
              </div>
            </motion.div>
          )}
        </AnimatePresence>

        {/* State label for hovered state without senators */}
        <AnimatePresence>
          {hoveredState && (!senatorsByState[hoveredState] || senatorsByState[hoveredState].length === 0) && (
            <motion.div
              initial={{ opacity: 0, scale: 0.9 }}
              animate={{ opacity: 1, scale: 1 }}
              exit={{ opacity: 0, scale: 0.9 }}
              className="absolute z-50 pointer-events-none"
              style={{
                left: Math.min(Math.max(tooltipPos.x - 75, 10), 600),
                top: Math.max(tooltipPos.y - 50, 10),
              }}
            >
              <div className="bg-[#0a0a0f]/95 border border-white/[0.15] rounded-lg px-3 py-2 shadow-2xl backdrop-blur-xl">
                <div className="text-sm text-white flex items-center gap-2">
                  <span>{statePaths[hoveredState]?.name}</span>
                  <span className="text-xs text-[#6b6b7a] font-mono">({hoveredState})</span>
                </div>
                <div className="text-xs text-[#6b6b7a]">No senators on file</div>
              </div>
            </motion.div>
          )}
        </AnimatePresence>
      </div>

      {/* Scanline effect */}
      <div className="absolute inset-0 pointer-events-none overflow-hidden rounded-xl">
        <div
          className="absolute inset-0 opacity-5"
          style={{
            backgroundImage:
              'repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(59,130,246,0.1) 2px, rgba(59,130,246,0.1) 4px)',
          }}
        />
      </div>
    </div>
  );
}
